<section id="communities" class="communities">
  <div class="wrapper">
    <h1>Comunidades:</h1>

    <div class="list-grid-toggle">
      <div class="icon">
        <div class="icon-bar"></div>
        <div class="icon-bar"></div>
        <div class="icon-bar"></div>
      </div>
      <span class="label">List</span>
    </div>

    <ul class="mini">
      {% for community in site.data.communities %}
        <li>
          <p>{{ community.name }}</p>
          <img src="{{ site.path.community_images }}{{ community.image }}" alt="{{ site.data.t[page.lang].communities.logo_from }} {{ community.name }}" title="{{ community.name }}">
          <ul class="links">
            {% for link in community.links %}
              <li>
                {% include icon-social.html url=link %}
              </li>
            {% endfor %}
          </ul>
        </li>
      {% endfor %}
    </ul>
  </div>
</section>

<script>
  function EnableListGridToggle() {
    var listGridToggles = document.querySelectorAll('.list-grid-toggle');
    var container = document.querySelector("#communities");
    listGridToggles.forEach(elem => {
      elem.onclick = function() {
        var txt = container.classList.contains('icon-grid') ? 'List' : 'Grid';
        container.classList.toggle('icon-grid');
        elem.querySelector(".label").innerText = txt;
      }
    });
  }

  window.onload = EnableListGridToggle();
</script>